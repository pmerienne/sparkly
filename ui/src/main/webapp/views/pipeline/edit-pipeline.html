<div>
    <header>
        <div class="pull-left">
            <span style="padding:5px;padding-right: 20px;">
                {{pipeline.name}}
                <span ng-show="!validationReport.isEmpty()" class="badge" style="color: #fff;background-color: #E74C3C;"
                      tooltip-placement="bottom" tooltip="{{validationReport.warningCount}} warnings, {{validationReport.errorCount}} errors">
                    !
                </span>
            </span>
            <span class="header-tab" ng-class="{true:'active', false:'clickable'}[currentView == 'Data workflow']" ng-click="currentView = 'Data workflow'">Data workflow</span>
            <span class="header-tab" ng-class="{true:'active', false:'clickable'}[currentView == 'Visualizations']" ng-click="currentView = 'Visualizations'">Monitoring</span>
            <span class="header-tab" ng-class="{true:'active', false:'clickable'}[currentView == 'Settings']" ng-click="currentView = 'Settings'">Settings</span>
            <span class="header-tab" ng-class="{true:'active', false:'clickable'}[currentView == 'Errors']" ng-click="currentView = 'Errors'" ng-show="!validationReport.isEmpty()">Errors ({{validationReport.size()}})</span>
        </div>

        <div class="pull-right">
            <i class="fa fa-cloud-upload fa-2x clickable" ng-click="saveAndLaunch()" style="margin-right: 40px" tooltip-placement="left" tooltip="Save and deploy"></i>
            <i class="fa fa-undo fa-2x clickable" ng-click="revert()" tooltip-placement="left" tooltip="Revert changes"></i>&nbsp;
            <i class="fa fa-save fa-2x clickable" ng-click="save()" tooltip-placement="left" tooltip="Save"></i>&nbsp;
        </div>
    </header>

    <pipeline-data-workflow ng-show="currentView == 'Data workflow'"></pipeline-data-workflow>

    <div ng-show="currentView == 'Visualizations'" class="container-fluid">
        <pipeline-visualization-edition ng-repeat="visualization in pipeline.visualizations" pipeline="pipeline" visualization="visualization"></pipeline-visualization-edition>

        <span class="btn-group">
            <button type="button" class="btn btn-primary">Add new visualization</button>
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                <span class="caret"></span>
                <span class="sr-only"></span>
            </button>
            <span class="dropdown-arrow dropdown-arrow-inverse"></span>
            <ul class="dropdown-menu dropdown-menu-inverse" role="menu">
                <li ng-repeat="visualizationMetadata in visualizationMetadatas">
                    <a ng-click="addNewVisualization(visualizationMetadata);">{{visualizationMetadata.name}}</a>
                </li>
            </ul>
        </span>
    </div>

    <div ng-show="currentView == 'Settings'" class="container-fluid">
        <h6>Informations</h6>
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="col-sm-3 control-label">Name</label>
                <div class="col-sm-9">
                    <input type="text" ng-model="pipeline.name" class="form-control" ng-required="true"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Description</label>
                <div class="col-sm-9">
                    <textarea ng-model="pipeline.description" class="form-control" rows="5" ng-required="false"/>
                </div>
            </div>
        </form>

        <div ng-repeat="(name, values) in pipeline.settings">
            <h6>{{name}}</h6>
            <form class="form-horizontal">
                <div class="form-group" ng-repeat="(key, value) in values">
                    <label class="col-sm-3 control-label">{{key}}</label>
                    <div class="col-sm-9">
                        <input type="text" ng-model="values[key]" class="form-control" />
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div ng-show="currentView == 'Errors'" class="container-fluid">
        <div class="bs-callout bs-callout-{{message.level.toLowerCase()}}" ng-repeat="message in validationReport.messages">
            <p>{{message.text}}</p>
        </div>
    </div>


</div>